// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using NetTopologySuite.Geometries;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using TRRCMS.Infrastructure.Persistence;

#nullable disable

namespace TRRCMS.Infrastructure.Migrations
{
    [DbContext(typeof(ApplicationDbContext))]
    partial class ApplicationDbContextModelSnapshot : ModelSnapshot
    {
        protected override void BuildModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.11")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.HasPostgresExtension(modelBuilder, "postgis");
            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("TRRCMS.Domain.Entities.AuditLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ActionDescription")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Human-readable description of the action");

                    b.Property<string>("ActionResult")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Result of the action (Success, Failed, Partial)");

                    b.Property<int>("ActionType")
                        .HasColumnType("integer")
                        .HasComment("Type of action performed (enum)");

                    b.Property<string>("AdditionalData")
                        .HasColumnType("jsonb")
                        .HasComment("Additional contextual information as JSON");

                    b.Property<long>("AuditLogNumber")
                        .HasColumnType("bigint")
                        .HasComment("Sequential audit log entry number");

                    b.Property<string>("ChangedFields")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Comma-separated list of changed fields");

                    b.Property<Guid?>("CorrelationId")
                        .HasColumnType("uuid")
                        .HasComment("Correlation ID to group related actions");

                    b.Property<string>("DeviceId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Device ID for mobile/tablet actions");

                    b.Property<Guid?>("EntityId")
                        .HasColumnType("uuid")
                        .HasComment("ID of the entity affected");

                    b.Property<string>("EntityIdentifier")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Human-readable identifier (e.g., Claim Number)");

                    b.Property<string>("EntityType")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Type of entity affected (e.g., Claim, Building)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Error message if action failed");

                    b.Property<string>("IpAddress")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("IP address from which action was performed");

                    b.Property<bool>("IsSecuritySensitive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if this is a security-sensitive action");

                    b.Property<string>("NewValues")
                        .HasColumnType("jsonb")
                        .HasComment("New state stored as JSON");

                    b.Property<string>("OldValues")
                        .HasColumnType("jsonb")
                        .HasComment("Previous state stored as JSON");

                    b.Property<Guid?>("ParentAuditLogId")
                        .HasColumnType("uuid")
                        .HasComment("Parent audit log ID for nested actions");

                    b.Property<bool>("RequiresLegalRetention")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if this action requires legal retention");

                    b.Property<DateTime?>("RetentionEndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Retention end date (10+ years for legal hold)");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<string>("SessionId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Session ID");

                    b.Property<string>("SourceApplication")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Source application (Mobile, Desktop, API)");

                    b.Property<string>("StackTrace")
                        .HasColumnType("text")
                        .HasComment("Stack trace if action failed");

                    b.Property<DateTime>("Timestamp")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When the action occurred (UTC)");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("User agent (browser/app information)");

                    b.Property<string>("UserFullName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Full name of user for historical record");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid")
                        .HasComment("User who performed the action");

                    b.Property<string>("UserRole")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("User's role at the time of action");

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Username at the time of action");

                    b.HasKey("Id");

                    b.HasIndex("ActionType");

                    b.HasIndex("AuditLogNumber")
                        .IsUnique();

                    b.HasIndex("CorrelationId");

                    b.HasIndex("IsSecuritySensitive");

                    b.HasIndex("ParentAuditLogId");

                    b.HasIndex("RetentionEndDate");

                    b.HasIndex("Timestamp");

                    b.HasIndex("UserId");

                    b.HasIndex("ActionResult", "Timestamp");

                    b.HasIndex("EntityType", "EntityId");

                    b.HasIndex("IsSecuritySensitive", "Timestamp");

                    b.HasIndex("UserId", "Timestamp");

                    b.HasIndex("EntityType", "EntityId", "Timestamp");

                    b.ToTable("AuditLogs", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Building", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Geometry>("BuildingGeometry")
                        .HasColumnType("geometry(Geometry, 4326)");

                    b.Property<string>("BuildingId")
                        .IsRequired()
                        .HasMaxLength(17)
                        .HasColumnType("character varying(17)");

                    b.Property<string>("BuildingNumber")
                        .IsRequired()
                        .HasMaxLength(5)
                        .HasColumnType("character varying(5)");

                    b.Property<string>("BuildingType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("CommunityCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<string>("CommunityName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DamageLevel")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("DistrictName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("GovernorateCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("GovernorateName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Landmark")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<decimal?>("Latitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<string>("LocationDescription")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal?>("Longitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<string>("NeighborhoodCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<string>("NeighborhoodName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("NumberOfApartments")
                        .HasColumnType("integer");

                    b.Property<int?>("NumberOfFloors")
                        .HasColumnType("integer");

                    b.Property<int>("NumberOfPropertyUnits")
                        .HasColumnType("integer");

                    b.Property<int>("NumberOfShops")
                        .HasColumnType("integer");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SubDistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("SubDistrictName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<int?>("YearOfConstruction")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("BuildingGeometry")
                        .HasDatabaseName("IX_Buildings_BuildingGeometry");

                    NpgsqlIndexBuilderExtensions.HasMethod(b.HasIndex("BuildingGeometry"), "gist");

                    b.HasIndex("BuildingId")
                        .IsUnique();

                    b.HasIndex("GovernorateCode", "DistrictCode", "SubDistrictCode", "CommunityCode", "NeighborhoodCode")
                        .HasDatabaseName("IX_Buildings_AdminHierarchy")
                        .HasFilter("\"IsDeleted\" = false");

                    b.ToTable("Buildings", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.BuildingAssignment", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ActualCompletionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Actual completion date");

                    b.Property<Guid?>("AssignedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when building was assigned");

                    b.Property<string>("AssignmentNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Assignment notes/instructions");

                    b.Property<Guid>("BuildingId")
                        .HasColumnType("uuid");

                    b.Property<int>("CompletedPropertyUnits")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of property units surveyed");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<Guid>("FieldCollectorId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if assignment is currently active");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsRevisit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if this is a revisit assignment");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LastTransferAttemptDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Last transfer attempt date");

                    b.Property<Guid?>("OriginalAssignmentId")
                        .HasColumnType("uuid");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasDefaultValue("Normal")
                        .HasComment("Assignment priority (Normal, High, Urgent)");

                    b.Property<string>("RevisitReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Reason for revisit");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("SynchronizedFromTabletDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when data was synchronized back from tablet");

                    b.Property<DateTime?>("TargetCompletionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Target completion date for the assignment");

                    b.Property<int>("TotalPropertyUnits")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Total property units in the building");

                    b.Property<string>("TransferErrorMessage")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Error message if transfer failed");

                    b.Property<int>("TransferRetryCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of transfer retry attempts");

                    b.Property<int>("TransferStatus")
                        .HasColumnType("integer")
                        .HasComment("Transfer status (1=Pending, 2=InProgress, 3=Transferred, 4=Failed, 5=Cancelled, 6=PartialTransfer, 7=Synchronized)");

                    b.Property<DateTime?>("TransferredToTabletDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when data was transferred to tablet");

                    b.Property<string>("UnitsForRevisit")
                        .HasColumnType("jsonb")
                        .HasComment("JSON array of property unit IDs for revisit");

                    b.HasKey("Id");

                    b.HasIndex("AssignedDate")
                        .HasDatabaseName("IX_BuildingAssignments_AssignedDate");

                    b.HasIndex("BuildingId")
                        .HasDatabaseName("IX_BuildingAssignments_BuildingId");

                    b.HasIndex("FieldCollectorId")
                        .HasDatabaseName("IX_BuildingAssignments_FieldCollectorId");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_BuildingAssignments_IsDeleted")
                        .HasFilter("\"IsDeleted\" = false");

                    b.HasIndex("OriginalAssignmentId");

                    b.HasIndex("BuildingId", "IsActive")
                        .HasDatabaseName("IX_BuildingAssignments_Building_Active");

                    b.HasIndex("FieldCollectorId", "IsActive")
                        .HasDatabaseName("IX_BuildingAssignments_FieldCollector_Active");

                    b.HasIndex("TransferStatus", "IsActive")
                        .HasDatabaseName("IX_BuildingAssignments_TransferStatus_Active");

                    b.ToTable("BuildingAssignments", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Claim", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllRequiredDocumentsSubmitted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if all required documents are submitted (جميع المستندات المطلوبة مقدمة)");

                    b.Property<DateTime?>("AssignedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when assigned to current officer (تاريخ التعيين)");

                    b.Property<Guid?>("AssignedToUserId")
                        .HasColumnType("uuid")
                        .HasComment("Currently assigned case officer (معرف الموظف المسؤول)");

                    b.Property<int>("CertificateStatus")
                        .HasColumnType("integer")
                        .HasComment("Certificate status: 1=NotRequired, 2=PendingGeneration, 3=Generated, 4=Issued, 5=Collected, 6=Rejected, 7=Revoked (حالة الشهادة)");

                    b.Property<string>("ClaimDescription")
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)")
                        .HasComment("Detailed description of the claim (وصف المطالبة)");

                    b.Property<string>("ClaimNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Unique claim identifier - Format: CLM-YYYY-NNNNNNNNN (رقم المطالبة)");

                    b.Property<int>("ClaimSource")
                        .HasColumnType("integer")
                        .HasComment("Claim source - How claim entered system: 1=FieldCollection, 2=OfficeSubmission, 3=SystemImport, 4=Migration, 5=OnlinePortal, 6=ApiIntegration, 7=ManualEntry (مصدر المطالبة)");

                    b.Property<string>("ClaimType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Claim type from controlled vocabulary - e.g., Ownership Claim, Occupancy Claim (نوع المطالبة)");

                    b.Property<int>("ConflictCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of conflicting claims detected (عدد المطالبات المتعارضة)");

                    b.Property<string>("ConflictResolutionStatus")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Conflict resolution status - e.g., Pending, Resolved (حالة حل التعارض)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was created (تاريخ الإنشاء)");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who created this record (معرف المستخدم المنشئ)");

                    b.Property<Guid?>("DecisionByUserId")
                        .HasColumnType("uuid")
                        .HasComment("User who made final decision (معرف المستخدم القرار)");

                    b.Property<DateTime?>("DecisionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when final decision was made (تاريخ القرار)");

                    b.Property<string>("DecisionNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Decision notes (ملاحظات القرار)");

                    b.Property<string>("DecisionReason")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Reason for approval or rejection (سبب القرار)");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was soft deleted (تاريخ الحذف)");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who soft deleted this record (معرف المستخدم الحاذف)");

                    b.Property<int>("EvidenceCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of evidence items attached (عدد الأدلة)");

                    b.Property<string>("FinalDecision")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Final decision on the claim - e.g., Approved, Rejected (القرار النهائي)");

                    b.Property<bool>("HasConflicts")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if there are conflicting claims (وجود تعارضات)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag (علامة الحذف المنطقي)");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified (تاريخ آخر تعديل)");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who last modified this record (معرف المستخدم المعدل)");

                    b.Property<string>("LegalBasis")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Legal basis for the claim (الأساس القانوني)");

                    b.Property<int>("LifecycleStage")
                        .HasColumnType("integer")
                        .HasComment("Current lifecycle stage: 1=DraftPendingSubmission, 2=Submitted, 3=InitialScreening, 4=UnderReview, 5=AwaitingDocuments, 6=ConflictDetected, 7=InAdjudication, 8=Approved, 9=Rejected, 10=CertificateIssued, 11=Archived (مرحلة دورة الحياة)");

                    b.Property<string>("MissingDocuments")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("List of missing document types - stored as JSON (المستندات المفقودة)");

                    b.Property<int?>("OwnershipShare")
                        .HasColumnType("integer")
                        .HasComment("Ownership share - Fraction out of 2400 (e.g., 1200 = 50%) (نصيب الملكية)");

                    b.Property<Guid?>("PrimaryClaimantId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Person - Primary claimant (معرف المدعي الأساسي)");

                    b.Property<int>("Priority")
                        .HasColumnType("integer")
                        .HasComment("Priority level: 1=Low, 2=Normal, 3=Medium, 4=High, 5=Critical, 6=VIP, 7=Escalated (الأولوية)");

                    b.Property<string>("ProcessingNotes")
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)")
                        .HasComment("Internal processing notes (ملاحظات المعالجة الداخلية)");

                    b.Property<Guid>("PropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PropertyUnit - Property being claimed (معرف الوحدة العقارية)");

                    b.Property<string>("PublicRemarks")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Public remarks visible to claimant (الملاحظات العامة)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasComment("Concurrency token for optimistic locking (رمز التزامن)");

                    b.Property<int>("Status")
                        .HasColumnType("integer")
                        .HasComment("Legacy status: 1=Draft, 2=Finalized, 3=UnderReview, 4=Approved, 5=Rejected, 6=PendingEvidence, 7=Disputed, 99=Archived (الحالة)");

                    b.Property<Guid?>("SubmittedByUserId")
                        .HasColumnType("uuid")
                        .HasComment("User who submitted the claim (معرف المستخدم المقدم)");

                    b.Property<DateTime?>("SubmittedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when claim was submitted (تاريخ التقديم)");

                    b.Property<string>("SupportingNarrative")
                        .HasMaxLength(5000)
                        .HasColumnType("character varying(5000)")
                        .HasComment("Supporting narrative or story (السرد الداعم)");

                    b.Property<DateTime?>("TargetCompletionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Target completion/decision date (تاريخ الإنجاز المستهدف)");

                    b.Property<int?>("TenureContractType")
                        .HasColumnType("integer")
                        .HasComment("Type of tenure contract: 1=Freehold, 2=Leasehold, 3=SharedOwnership, 4=Rental, 5=Informal, 6=Customary, 7=Usufruct, 99=Other (نوع عقد الحيازة)");

                    b.Property<DateTime?>("TenureEndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when tenure/occupancy ended (تاريخ انتهاء الحيازة)");

                    b.Property<DateTime?>("TenureStartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date from which tenure/occupancy started (تاريخ بدء الحيازة)");

                    b.Property<DateTime?>("VerificationDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when verification was completed (تاريخ التحقق)");

                    b.Property<string>("VerificationNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Verification notes (ملاحظات التحقق)");

                    b.Property<int>("VerificationStatus")
                        .HasColumnType("integer")
                        .HasComment("Verification status: 1=Pending, 2=Verified, 3=Rejected, 4=RequiresAdditionalInfo (حالة التحقق)");

                    b.Property<Guid?>("VerifiedByUserId")
                        .HasColumnType("uuid")
                        .HasComment("User who verified the claim (معرف المستخدم المحقق)");

                    b.HasKey("Id");

                    b.HasIndex("AssignedToUserId")
                        .HasDatabaseName("IX_Claims_AssignedToUserId");

                    b.HasIndex("CertificateStatus")
                        .HasDatabaseName("IX_Claims_CertificateStatus");

                    b.HasIndex("ClaimNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_Claims_ClaimNumber");

                    b.HasIndex("DecisionDate")
                        .HasDatabaseName("IX_Claims_DecisionDate");

                    b.HasIndex("HasConflicts")
                        .HasDatabaseName("IX_Claims_HasConflicts");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Claims_IsDeleted");

                    b.HasIndex("LifecycleStage")
                        .HasDatabaseName("IX_Claims_LifecycleStage");

                    b.HasIndex("PrimaryClaimantId")
                        .HasDatabaseName("IX_Claims_PrimaryClaimantId");

                    b.HasIndex("Priority")
                        .HasDatabaseName("IX_Claims_Priority");

                    b.HasIndex("PropertyUnitId")
                        .HasDatabaseName("IX_Claims_PropertyUnitId");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_Claims_Status");

                    b.HasIndex("SubmittedDate")
                        .HasDatabaseName("IX_Claims_SubmittedDate");

                    b.HasIndex("TargetCompletionDate")
                        .HasDatabaseName("IX_Claims_TargetCompletionDate");

                    b.HasIndex("VerificationStatus")
                        .HasDatabaseName("IX_Claims_VerificationStatus");

                    b.HasIndex("HasConflicts", "LifecycleStage")
                        .HasDatabaseName("IX_Claims_HasConflicts_LifecycleStage");

                    b.HasIndex("IsDeleted", "LifecycleStage")
                        .HasDatabaseName("IX_Claims_IsDeleted_LifecycleStage");

                    b.HasIndex("LifecycleStage", "AssignedToUserId")
                        .HasDatabaseName("IX_Claims_LifecycleStage_AssignedToUserId");

                    b.HasIndex("Priority", "TargetCompletionDate")
                        .HasDatabaseName("IX_Claims_Priority_TargetCompletionDate");

                    b.HasIndex("PropertyUnitId", "IsDeleted")
                        .HasDatabaseName("IX_Claims_PropertyUnitId_IsDeleted");

                    b.ToTable("Claims", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.ConflictResolution", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AssignedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("AssignedToUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("AutoResolutionRule")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Name of the auto-resolution rule applied (if automated)");

                    b.Property<string>("ConfidenceLevel")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Low, Medium, High");

                    b.Property<string>("ConflictDescription")
                        .IsRequired()
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("ConflictNumber")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Human-readable conflict number (CNF-YYYY-NNNN)");

                    b.Property<string>("ConflictType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("PersonDuplicate, PropertyDuplicate, ClaimConflict");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DataComparison")
                        .HasColumnType("text")
                        .HasComment("JSON: side-by-side field comparison of conflicting entities");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("DetectedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("DetectedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DiscardedEntityId")
                        .HasColumnType("uuid")
                        .HasComment("ID of the discarded entity (if Merge action)");

                    b.Property<string>("EntityType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Type of entities in conflict: Person, PropertyUnit, Building");

                    b.Property<Guid?>("EscalatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("EscalatedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EscalationReason")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid>("FirstEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("FirstEntityIdentifier")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Human-readable identifier for first entity (e.g. name, building ID)");

                    b.Property<Guid?>("ImportPackageId")
                        .HasColumnType("uuid")
                        .HasComment("Import package that triggered this conflict (null for manual detections)");

                    b.Property<bool>("IsAutoDetected")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsAutoResolved")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsEscalated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsOverdue")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("MatchingCriteria")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)")
                        .HasComment("JSON: {\"national_id\": \"match\", \"name_similarity\": \"95%\", ...}");

                    b.Property<string>("MergeMapping")
                        .HasColumnType("text")
                        .HasComment("JSON: which fields came from which entity — audit trail");

                    b.Property<Guid?>("MergedEntityId")
                        .HasColumnType("uuid")
                        .HasComment("ID of the resulting merged entity (if Merge action)");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Low, Normal, High, Critical");

                    b.Property<string>("ResolutionAction")
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)")
                        .HasComment("KeepBoth, Merge, KeepFirst, KeepSecond, Ignored, etc.");

                    b.Property<string>("ResolutionNotes")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("ResolutionReason")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid?>("ResolvedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ResolvedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("ReviewAttemptCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ReviewHistory")
                        .HasColumnType("text")
                        .HasComment("JSON array: [{\"AttemptNumber\":1, \"Date\":\"...\", \"Notes\":\"...\"}]");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<Guid>("SecondEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("SecondEntityIdentifier")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Human-readable identifier for second entity");

                    b.Property<decimal>("SimilarityScore")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)")
                        .HasComment("Similarity score 0-100% — higher means more likely duplicate");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)")
                        .HasComment("PendingReview, Resolved, Ignored");

                    b.Property<int?>("TargetResolutionHours")
                        .HasColumnType("integer")
                        .HasComment("SLA target in hours for conflict resolution");

                    b.HasKey("Id");

                    b.HasIndex("DetectedDate")
                        .HasDatabaseName("IX_ConflictResolutions_DetectedDate");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_ConflictResolutions_ImportPackageId");

                    b.HasIndex("AssignedToUserId", "Status")
                        .HasDatabaseName("IX_ConflictResolutions_AssignedToUserId_Status");

                    b.HasIndex("ConflictType", "Status")
                        .HasDatabaseName("IX_ConflictResolutions_ConflictType_Status");

                    b.HasIndex("FirstEntityId", "SecondEntityId")
                        .HasDatabaseName("IX_ConflictResolutions_FirstEntityId_SecondEntityId");

                    b.ToTable("ConflictResolutions", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Document", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClaimId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Claim (if document supports a claim)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was created");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who created this record");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was soft deleted");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who soft deleted this record");

                    b.Property<string>("DocumentHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasComment("SHA-256 hash of the document for integrity verification");

                    b.Property<string>("DocumentNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Document number/reference (e.g., Tabu number, ID number, contract number)");

                    b.Property<string>("DocumentTitle")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Document title or description in Arabic");

                    b.Property<int>("DocumentType")
                        .HasMaxLength(100)
                        .HasColumnType("integer")
                        .HasComment("Document type from controlled vocabulary (e.g., TabuGreen, RentalContract, NationalIdCard)");

                    b.Property<Guid?>("EvidenceId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Evidence entity (the actual file/scan)");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when document expires (if applicable)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<bool>("IsLegallyValid")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if document is legally valid");

                    b.Property<bool>("IsNotarized")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if document is notarized");

                    b.Property<bool>("IsOriginal")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if document is original or a copy");

                    b.Property<bool>("IsVerified")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if document has been verified");

                    b.Property<DateTime?>("IssueDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when document was issued");

                    b.Property<string>("IssuingAuthority")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Issuing authority/organization (e.g., Ministry of Interior, Aleppo Municipality)");

                    b.Property<string>("IssuingPlace")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Place where document was issued");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("UTC timestamp when record was last modified");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who last modified this record");

                    b.Property<string>("LegalValidityNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Legal validity notes (why valid or invalid)");

                    b.Property<DateTime?>("NotarizationDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Notarization date");

                    b.Property<string>("NotarizationNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Notarization number");

                    b.Property<string>("NotaryOffice")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Notary office name/number");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Additional notes about this document");

                    b.Property<Guid?>("OriginalDocumentId")
                        .HasColumnType("uuid")
                        .HasComment("If copy, reference to original document (if in system)");

                    b.Property<Guid?>("PersonId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Person (if document belongs to a person)");

                    b.Property<Guid?>("PersonPropertyRelationId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PersonPropertyRelation (if document proves a relation)");

                    b.Property<Guid?>("PropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PropertyUnit (if document relates to property)");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("VerificationDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when document was verified");

                    b.Property<string>("VerificationNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Verification notes or comments");

                    b.Property<int>("VerificationStatus")
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("integer")
                        .HasDefaultValue(1)
                        .HasComment("Verification status (Pending, Verified, Rejected, RequiresAdditionalInfo)");

                    b.Property<Guid?>("VerifiedByUserId")
                        .HasColumnType("uuid")
                        .HasComment("User who verified the document");

                    b.HasKey("Id");

                    b.HasIndex("ClaimId")
                        .HasDatabaseName("IX_Documents_ClaimId");

                    b.HasIndex("DocumentNumber")
                        .HasDatabaseName("IX_Documents_DocumentNumber");

                    b.HasIndex("DocumentType")
                        .HasDatabaseName("IX_Documents_DocumentType");

                    b.HasIndex("EvidenceId")
                        .HasDatabaseName("IX_Documents_EvidenceId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_Documents_ExpiryDate");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Documents_IsDeleted");

                    b.HasIndex("IsVerified")
                        .HasDatabaseName("IX_Documents_IsVerified");

                    b.HasIndex("OriginalDocumentId");

                    b.HasIndex("PersonId")
                        .HasDatabaseName("IX_Documents_PersonId");

                    b.HasIndex("PersonPropertyRelationId")
                        .HasDatabaseName("IX_Documents_PersonPropertyRelationId");

                    b.HasIndex("PropertyUnitId")
                        .HasDatabaseName("IX_Documents_PropertyUnitId");

                    b.HasIndex("VerificationStatus")
                        .HasDatabaseName("IX_Documents_VerificationStatus");

                    b.HasIndex("DocumentType", "VerificationStatus")
                        .HasDatabaseName("IX_Documents_DocumentType_VerificationStatus");

                    b.ToTable("Documents", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Evidence", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ClaimId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Claim");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Creation timestamp (UTC)");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who created this record");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Deletion timestamp (UTC)");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who deleted this record");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Document or evidence description");

                    b.Property<DateTime?>("DocumentExpiryDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when the document expires");

                    b.Property<DateTime?>("DocumentIssuedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when the document was issued");

                    b.Property<string>("DocumentReferenceNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Document reference number");

                    b.Property<int>("EvidenceType")
                        .HasColumnType("integer")
                        .HasComment("نوع الدليل - IdentificationDocument=1, OwnershipDeed=2, RentalContract=3, etc.");

                    b.Property<string>("FileHash")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)")
                        .HasComment("SHA-256 hash of the file for integrity verification");

                    b.Property<string>("FilePath")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("File path in storage system");

                    b.Property<long>("FileSizeBytes")
                        .HasColumnType("bigint")
                        .HasComment("File size in bytes");

                    b.Property<bool>("IsCurrentVersion")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if this is the current/latest version");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<string>("IssuingAuthority")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Issuing authority or organization");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Last modification timestamp (UTC)");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who last modified this record");

                    b.Property<string>("MimeType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("MIME type (e.g., image/jpeg, application/pdf)");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Additional notes about this evidence");

                    b.Property<string>("OriginalFileName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasComment("Original filename as uploaded");

                    b.Property<Guid?>("PersonId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Person");

                    b.Property<Guid?>("PersonPropertyRelationId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PersonPropertyRelation");

                    b.Property<Guid?>("PreviousVersionId")
                        .HasColumnType("uuid")
                        .HasComment("Reference to previous version");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasComment("Concurrency token");

                    b.Property<int>("VersionNumber")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1)
                        .HasComment("Version number for document versioning");

                    b.HasKey("Id");

                    b.HasIndex("ClaimId")
                        .HasDatabaseName("IX_Evidences_ClaimId");

                    b.HasIndex("DocumentExpiryDate")
                        .HasDatabaseName("IX_Evidences_DocumentExpiryDate");

                    b.HasIndex("EvidenceType")
                        .HasDatabaseName("IX_Evidences_EvidenceType");

                    b.HasIndex("IsCurrentVersion")
                        .HasDatabaseName("IX_Evidences_IsCurrentVersion");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Evidences_IsDeleted");

                    b.HasIndex("PersonId")
                        .HasDatabaseName("IX_Evidences_PersonId");

                    b.HasIndex("PersonPropertyRelationId")
                        .HasDatabaseName("IX_Evidences_PersonPropertyRelationId");

                    b.HasIndex("PreviousVersionId");

                    b.HasIndex("IsCurrentVersion", "IsDeleted")
                        .HasDatabaseName("IX_Evidences_IsCurrentVersion_IsDeleted");

                    b.ToTable("Evidences", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Household", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("AdultCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of adults (18-64 years)");

                    b.Property<DateTime?>("ArrivalDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date of arrival at current location");

                    b.Property<int>("ChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of children (2-12 years) - legacy total");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Creation timestamp (UTC)");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who created this record");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Deletion timestamp (UTC)");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who deleted this record");

                    b.Property<string>("DisplacementReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Reason for displacement");

                    b.Property<int>("ElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of elderly (65+ years) - legacy total");

                    b.Property<int>("EmployedPersonsCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of employed persons");

                    b.Property<int>("FemaleChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد الأطفال الإناث (أقل من 18) - Number of female children under 18");

                    b.Property<int>("FemaleCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد البالغين الإناث - Number of adult females");

                    b.Property<int>("FemaleDisabledCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد المعاقين الإناث - Number of female persons with disabilities");

                    b.Property<int>("FemaleElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد كبار السن الإناث (أكثر من 65) - Number of female elderly over 65");

                    b.Property<string>("HeadOfHouseholdName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("رب الأسرة/العميل - Name of head of household (nullable for office survey)");

                    b.Property<Guid?>("HeadOfHouseholdPersonId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Person (head of household)");

                    b.Property<int>("HouseholdSize")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد الأفراد - Total household size");

                    b.Property<int>("InfantCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of infants (under 2 years)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<bool>("IsDisplaced")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if household is displaced");

                    b.Property<bool>("IsFemaleHeaded")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if household is female-headed");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Last modification timestamp (UTC)");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who last modified this record");

                    b.Property<int>("MaleChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد الأطفال الذكور (أقل من 18) - Number of male children under 18");

                    b.Property<int>("MaleCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد البالغين الذكور - Number of adult males");

                    b.Property<int>("MaleDisabledCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد المعاقين الذكور - Number of male persons with disabilities");

                    b.Property<int>("MaleElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("عدد كبار السن الذكور (أكثر من 65) - Number of male elderly over 65");

                    b.Property<int>("MinorCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of minors/adolescents (13-17 years)");

                    b.Property<decimal?>("MonthlyIncomeEstimate")
                        .HasPrecision(18, 2)
                        .HasColumnType("numeric(18,2)")
                        .HasComment("Estimated monthly income");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("ملاحظات - Household notes");

                    b.Property<string>("OccupancyNature")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("طبيعة الإشغال - Occupancy nature (enum converted to string): LegalFormal, Informal, Customary, etc.");

                    b.Property<string>("OccupancyType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("نوع الإشغال - Occupancy type (enum converted to string): OwnerOccupied, TenantOccupied, etc.");

                    b.Property<string>("OriginLocation")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Origin location if displaced");

                    b.Property<int>("OrphanCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of orphans");

                    b.Property<int>("PersonsWithDisabilitiesCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Total persons with disabilities - legacy total");

                    b.Property<string>("PrimaryIncomeSource")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Primary income source");

                    b.Property<Guid>("PropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PropertyUnit");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasComment("Concurrency token");

                    b.Property<int>("SingleParentCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of single parents");

                    b.Property<string>("SpecialNeeds")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Special needs or circumstances");

                    b.Property<int>("UnemployedPersonsCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of unemployed persons");

                    b.Property<int>("WidowCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0)
                        .HasComment("Number of widows");

                    b.HasKey("Id");

                    b.HasIndex("HeadOfHouseholdPersonId")
                        .HasDatabaseName("IX_Household_HeadOfHouseholdPersonId");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Household_IsDeleted");

                    b.HasIndex("PropertyUnitId")
                        .HasDatabaseName("IX_Household_PropertyUnitId");

                    b.HasIndex("IsDisplaced", "IsDeleted")
                        .HasDatabaseName("IX_Household_IsDisplaced_IsDeleted");

                    b.ToTable("Households", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.ImportPackage", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ArchivePath")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("File path: archives/YYYY/MM/[package_id].uhc");

                    b.Property<DateTime?>("ArchivedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("AreConflictsResolved")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<int>("BuildingCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("Checksum")
                        .IsRequired()
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)")
                        .HasComment("SHA-256 checksum of the .uhc file");

                    b.Property<int>("ClaimCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<Guid?>("CommittedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CommittedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when data was committed to production tables");

                    b.Property<int>("ConflictCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DeviceId")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Tablet/device ID that created the package");

                    b.Property<string>("DigitalSignature")
                        .HasMaxLength(2048)
                        .HasColumnType("character varying(2048)")
                        .HasComment("Digital signature of the package (if signed)");

                    b.Property<int>("DocumentCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ErrorLog")
                        .HasColumnType("text")
                        .HasComment("Detailed error log (stored as JSON)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid>("ExportedByUserId")
                        .HasColumnType("uuid")
                        .HasComment("Field collector who created the package");

                    b.Property<int>("FailedImportCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("FileName")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Original filename of the .uhc container");

                    b.Property<long>("FileSizeBytes")
                        .HasColumnType("bigint");

                    b.Property<string>("ImportMethod")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Import method: Manual, NetworkSync, WatchedFolder");

                    b.Property<string>("ImportSummary")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<Guid?>("ImportedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ImportedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when package was uploaded to desktop system");

                    b.Property<bool>("IsArchived")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsChecksumValid")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSchemaValid")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSignatureValid")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsVocabularyCompatible")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("PackageCreatedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when package was created on tablet");

                    b.Property<DateTime>("PackageExportedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when package was exported from tablet");

                    b.Property<Guid>("PackageId")
                        .HasColumnType("uuid")
                        .HasComment("Unique package identifier from .uhc manifest — enforces idempotent imports");

                    b.Property<string>("PackageNumber")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Human-readable package number (PKG-YYYY-NNNN)");

                    b.Property<int>("PersonCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("PersonDuplicateCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ProcessingNotes")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<int>("PropertyDuplicateCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("PropertyUnitCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("SchemaVersion")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<int>("SkippedRecordCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)")
                        .HasComment("Current import workflow status");

                    b.Property<int>("SuccessfulImportCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("SurveyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<long>("TotalAttachmentSizeBytes")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasDefaultValue(0L);

                    b.Property<DateTime?>("ValidationCompletedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("ValidationErrorCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of validation error messages");

                    b.Property<DateTime?>("ValidationStartedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("ValidationWarningCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of validation warning messages");

                    b.Property<string>("VocabularyCompatibilityIssues")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)")
                        .HasComment("Vocabulary compatibility issues (if any)");

                    b.Property<string>("VocabularyVersions")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)")
                        .HasComment("JSON object of vocabulary versions: {\"ownership_type\": \"1.2.0\", ...}");

                    b.HasKey("Id");

                    b.HasIndex("ExportedByUserId")
                        .HasDatabaseName("IX_ImportPackages_ExportedByUserId");

                    b.HasIndex("ImportedDate")
                        .HasDatabaseName("IX_ImportPackages_ImportedDate");

                    b.HasIndex("PackageId")
                        .IsUnique()
                        .HasDatabaseName("IX_ImportPackages_PackageId");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_ImportPackages_Status");

                    b.ToTable("ImportPackages", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Neighborhood", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<double?>("AreaSquareKm")
                        .HasPrecision(10, 4)
                        .HasColumnType("double precision");

                    b.Property<Geometry>("BoundaryGeometry")
                        .HasColumnType("geometry(Geometry, 4326)");

                    b.Property<decimal>("CenterLatitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<decimal>("CenterLongitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<Point>("CenterPoint")
                        .HasColumnType("geometry(Point, 4326)");

                    b.Property<string>("CommunityCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("FullCode")
                        .IsRequired()
                        .HasMaxLength(12)
                        .HasColumnType("character varying(12)");

                    b.Property<string>("GovernorateCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("NameArabic")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("NameEnglish")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("NeighborhoodCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("SubDistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<int>("ZoomLevel")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(15);

                    b.HasKey("Id");

                    b.HasIndex("BoundaryGeometry")
                        .HasDatabaseName("IX_Neighborhoods_BoundaryGeometry");

                    NpgsqlIndexBuilderExtensions.HasMethod(b.HasIndex("BoundaryGeometry"), "gist");

                    b.HasIndex("FullCode")
                        .IsUnique()
                        .HasDatabaseName("IX_Neighborhoods_FullCode");

                    b.HasIndex("GovernorateCode", "DistrictCode", "SubDistrictCode", "CommunityCode")
                        .HasDatabaseName("IX_Neighborhoods_AdminHierarchy");

                    b.ToTable("Neighborhoods", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Person", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Creation timestamp (UTC)");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who created this record");

                    b.Property<DateTime?>("DateOfBirth")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("تاريخ الميلاد - Date of birth (full date or year-only)");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Deletion timestamp (UTC)");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who deleted this record");

                    b.Property<string>("Email")
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)")
                        .HasComment("البريد الالكتروني - Email address");

                    b.Property<string>("FamilyNameArabic")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("الكنية - Family/Last name in Arabic");

                    b.Property<string>("FatherNameArabic")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("اسم الأب - Father's name in Arabic");

                    b.Property<string>("FirstNameArabic")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("الاسم الأول - First name in Arabic");

                    b.Property<string>("FullNameEnglish")
                        .HasMaxLength(300)
                        .HasColumnType("character varying(300)")
                        .HasComment("Full name in English (optional)");

                    b.Property<string>("Gender")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Gender (enum converted to string)");

                    b.Property<bool>("HasIdentificationDocument")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Flag indicating if ID document was uploaded");

                    b.Property<Guid?>("HouseholdId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to household (nullable)");

                    b.Property<bool>("IsContactPerson")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Indicates if this person is the main contact");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Last modification timestamp (UTC)");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who last modified this record");

                    b.Property<string>("MobileNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("رقم الموبايل - Mobile phone number");

                    b.Property<string>("MotherNameArabic")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("الاسم الأم - Mother's name in Arabic");

                    b.Property<string>("NationalId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("الرقم الوطني - National ID or identification number");

                    b.Property<string>("Nationality")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Nationality (enum converted to string)");

                    b.Property<string>("PhoneNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("رقم الهاتف - Landline phone number");

                    b.Property<string>("RelationshipToHead")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Relationship to head of household (enum converted to string)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasComment("Concurrency token");

                    b.HasKey("Id");

                    b.HasIndex("Email")
                        .HasDatabaseName("IX_Person_Email");

                    b.HasIndex("HouseholdId")
                        .HasDatabaseName("IX_Person_HouseholdId");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Person_IsDeleted");

                    b.HasIndex("MobileNumber")
                        .HasDatabaseName("IX_Person_MobileNumber");

                    b.HasIndex("NationalId")
                        .HasDatabaseName("IX_Person_NationalId");

                    b.HasIndex("FirstNameArabic", "FatherNameArabic", "FamilyNameArabic")
                        .HasDatabaseName("IX_Person_FullNameArabic");

                    b.ToTable("Persons", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PersonPropertyRelation", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ContractDetails")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Contract or agreement details");

                    b.Property<int?>("ContractType")
                        .HasColumnType("integer")
                        .HasComment("نوع العقد - FullOwnership=1, SharedOwnership=2, etc. (deprecated for office survey)");

                    b.Property<string>("ContractTypeOtherDesc")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Description when contract type is 'Other' (deprecated for office survey)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Creation timestamp (UTC)");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who created this record");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Deletion timestamp (UTC)");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who deleted this record");

                    b.Property<DateTime?>("EndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("End date of the relation (deprecated for office survey)");

                    b.Property<bool>("HasEvidence")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("هل يوجد دليل؟ - Indicates if evidence documents are available/attached");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if this relation is currently active");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Soft delete flag");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Last modification timestamp (UTC)");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid")
                        .HasComment("User who last modified this record");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("ملاحظاتك - Additional notes about this relation");

                    b.Property<string>("OccupancyType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("نوع الإشغال - Occupancy type (enum): OwnerOccupied=1, TenantOccupied=2, etc.");

                    b.Property<decimal?>("OwnershipShare")
                        .HasPrecision(18, 4)
                        .HasColumnType("numeric(18,4)")
                        .HasComment("حصة الملكية - Ownership share (0.0 to 1.0)");

                    b.Property<Guid>("PersonId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Person");

                    b.Property<Guid>("PropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to PropertyUnit");

                    b.Property<int>("RelationType")
                        .HasColumnType("integer")
                        .HasComment("نوع العلاقة - Owner=1, Occupant=2, Tenant=3, Guest=4, Heir=5, Other=99");

                    b.Property<string>("RelationTypeOtherDesc")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Description when relation type is 'Other' (deprecated for office survey)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea")
                        .HasComment("Concurrency token");

                    b.Property<DateTime?>("StartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("تاريخ بدء العلاقة - Start date of the relation (deprecated for office survey)");

                    b.Property<Guid?>("SurveyId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to the originating Survey — scopes claim creation to this survey's relations only");

                    b.HasKey("Id");

                    b.HasIndex("ContractType")
                        .HasDatabaseName("IX_PersonPropertyRelation_ContractType");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_PersonPropertyRelation_IsActive");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_PersonPropertyRelation_IsDeleted");

                    b.HasIndex("PersonId")
                        .HasDatabaseName("IX_PersonPropertyRelation_PersonId");

                    b.HasIndex("PropertyUnitId")
                        .HasDatabaseName("IX_PersonPropertyRelation_PropertyUnitId");

                    b.HasIndex("RelationType")
                        .HasDatabaseName("IX_PersonPropertyRelation_RelationType");

                    b.HasIndex("SurveyId")
                        .HasDatabaseName("IX_PersonPropertyRelation_SurveyId");

                    b.HasIndex("IsActive", "IsDeleted")
                        .HasDatabaseName("IX_PersonPropertyRelation_IsActive_IsDeleted");

                    b.HasIndex("PersonId", "PropertyUnitId")
                        .HasDatabaseName("IX_PersonPropertyRelation_PersonId_PropertyUnitId");

                    b.ToTable("PersonPropertyRelations", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PropertyUnit", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal?>("AreaSquareMeters")
                        .HasPrecision(10, 2)
                        .HasColumnType("numeric(10,2)");

                    b.Property<Guid>("BuildingId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DamageLevel")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<decimal?>("EstimatedAreaSqm")
                        .HasColumnType("numeric");

                    b.Property<int?>("FloorNumber")
                        .HasColumnType("integer");

                    b.Property<bool?>("HasBalcony")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasElectricity")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasSewage")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasWater")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<int?>("NumberOfBathrooms")
                        .HasColumnType("integer");

                    b.Property<int?>("NumberOfHouseholds")
                        .HasColumnType("integer");

                    b.Property<int?>("NumberOfRooms")
                        .HasColumnType("integer");

                    b.Property<string>("OccupancyNature")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("OccupancyStatus")
                        .HasColumnType("text");

                    b.Property<string>("OccupancyType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("PositionOnFloor")
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("SpecialFeatures")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int?>("TotalOccupants")
                        .HasColumnType("integer");

                    b.Property<string>("UnitIdentifier")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("UnitType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("UtilitiesNotes")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BuildingId", "UnitIdentifier")
                        .IsUnique()
                        .HasDatabaseName("IX_PropertyUnits_BuildingId_UnitIdentifier");

                    b.ToTable("PropertyUnits", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Referral", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AcknowledgedByUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("AcknowledgedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ActionsRequired")
                        .HasColumnType("text");

                    b.Property<Guid>("ClaimId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to Claim being referred");

                    b.Property<DateTime?>("CompletedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("DocumentsRequired")
                        .HasColumnType("text");

                    b.Property<int?>("EscalationLevel")
                        .HasColumnType("integer");

                    b.Property<DateTime?>("ExpectedResponseDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("FromRole")
                        .HasColumnType("integer")
                        .HasComment("Role referring the claim");

                    b.Property<Guid>("FromUserId")
                        .HasColumnType("uuid")
                        .HasComment("User who initiated the referral");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsEscalation")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsOverdue")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Outcome")
                        .HasColumnType("text");

                    b.Property<Guid?>("PreviousReferralId")
                        .HasColumnType("uuid");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("ReferralDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ReferralNotes")
                        .HasColumnType("text");

                    b.Property<string>("ReferralNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Referral number - Format: REF-YYYY-NNNN");

                    b.Property<string>("ReferralReason")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ReferralType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ResponseNotes")
                        .HasColumnType("text");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<DateTime?>("StartedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int?>("TargetResolutionHours")
                        .HasColumnType("integer");

                    b.Property<int>("ToRole")
                        .HasColumnType("integer")
                        .HasComment("Role receiving the claim");

                    b.Property<Guid?>("ToUserId")
                        .HasColumnType("uuid")
                        .HasComment("Specific user assigned (optional)");

                    b.HasKey("Id");

                    b.HasIndex("ClaimId")
                        .HasDatabaseName("IX_Referrals_ClaimId");

                    b.HasIndex("IsDeleted")
                        .HasDatabaseName("IX_Referrals_IsDeleted");

                    b.HasIndex("PreviousReferralId");

                    b.HasIndex("ReferralNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_Referrals_ReferralNumber");

                    b.ToTable("Referrals", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingBuilding", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("BuildingGeometryWkt")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("WKT representation — converted to PostGIS geometry on commit");

                    b.Property<string>("BuildingId")
                        .HasMaxLength(17)
                        .HasColumnType("character varying(17)")
                        .HasComment("Composite 17-digit ID — optional in staging, computed from admin codes during commit");

                    b.Property<string>("BuildingNumber")
                        .IsRequired()
                        .HasMaxLength(5)
                        .HasColumnType("character varying(5)");

                    b.Property<string>("BuildingType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("CommunityCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<string>("CommunityName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("From lookup tables — not in mobile package");

                    b.Property<string>("DamageLevel")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("DistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("DistrictName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("From lookup tables — not in mobile package");

                    b.Property<string>("GovernorateCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("GovernorateName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("From lookup tables — not in mobile package");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Landmark")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<decimal?>("Latitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<string>("LocationDescription")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<decimal?>("Longitude")
                        .HasPrecision(10, 7)
                        .HasColumnType("numeric(10,7)");

                    b.Property<string>("NeighborhoodCode")
                        .IsRequired()
                        .HasMaxLength(3)
                        .HasColumnType("character varying(3)");

                    b.Property<string>("NeighborhoodName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("From lookup tables — not in mobile package");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<int>("NumberOfApartments")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int?>("NumberOfFloors")
                        .HasColumnType("integer")
                        .HasComment("Future expansion — not in current mobile package");

                    b.Property<int>("NumberOfPropertyUnits")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("NumberOfShops")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SubDistrictCode")
                        .IsRequired()
                        .HasMaxLength(2)
                        .HasColumnType("character varying(2)");

                    b.Property<string>("SubDistrictName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("From lookup tables — not in mobile package");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.Property<int?>("YearOfConstruction")
                        .HasColumnType("integer")
                        .HasComment("Future expansion — not in current mobile package");

                    b.HasKey("Id");

                    b.HasIndex("BuildingId")
                        .HasDatabaseName("IX_StagingBuildings_BuildingId");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingBuildings_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingBuildings_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingBuildings_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingBuildings", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingClaim", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllRequiredDocumentsSubmitted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("ClaimDescription")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("ClaimNumber")
                        .HasMaxLength(30)
                        .HasColumnType("character varying(30)")
                        .HasComment("Optional in staging — auto-generated during commit (FR-D-8)");

                    b.Property<string>("ClaimSource")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ClaimType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<int>("EvidenceCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("LegalBasis")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("LifecycleStage")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set to DraftPendingSubmission during commit");

                    b.Property<string>("MissingDocuments")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("JSON array of missing required document types");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("OriginalPrimaryClaimantId")
                        .HasColumnType("uuid")
                        .HasComment("Original primary claimant Person UUID from .uhc");

                    b.Property<Guid>("OriginalPropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Original PropertyUnit UUID from .uhc — not a FK to production PropertyUnits");

                    b.Property<decimal?>("OwnershipShare")
                        .HasColumnType("numeric")
                        .HasComment("Ownership percentage (0-100)");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasDefaultValue("Normal");

                    b.Property<string>("ProcessingNotes")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("PublicRemarks")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set to Draft during commit");

                    b.Property<string>("SupportingNarrative")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<DateTime?>("TargetCompletionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Target completion date for claim processing");

                    b.Property<string>("TenureContractType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<DateTime?>("TenureEndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when tenure/occupancy ended");

                    b.Property<DateTime?>("TenureStartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date from which tenure/occupancy started");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.Property<string>("VerificationNotes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("VerificationStatus")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set to Pending during commit");

                    b.HasKey("Id");

                    b.HasIndex("ClaimNumber")
                        .HasDatabaseName("IX_StagingClaims_ClaimNumber");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingClaims_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingClaims_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "OriginalPropertyUnitId")
                        .HasDatabaseName("IX_StagingClaims_ImportPackageId_OriginalPropertyUnitId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingClaims_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingClaims", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingEvidence", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<DateTime?>("DocumentExpiryDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when document expires");

                    b.Property<DateTime?>("DocumentIssuedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when document was issued");

                    b.Property<string>("DocumentReferenceNumber")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("EvidenceType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("FileHash")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)")
                        .HasComment("SHA-256 hash for deduplication during commit (FR-D-9)");

                    b.Property<string>("FilePath")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("File path within .uhc container or staging storage");

                    b.Property<long>("FileSizeBytes")
                        .HasColumnType("bigint");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsCurrentVersion")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<string>("IssuingAuthority")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("MimeType")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid?>("OriginalClaimId")
                        .HasColumnType("uuid")
                        .HasComment("Original Claim UUID from .uhc");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("OriginalFileName")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid?>("OriginalPersonId")
                        .HasColumnType("uuid")
                        .HasComment("Original Person UUID from .uhc — not a FK to production Persons");

                    b.Property<Guid?>("OriginalPersonPropertyRelationId")
                        .HasColumnType("uuid")
                        .HasComment("Original PersonPropertyRelation UUID from .uhc");

                    b.Property<Guid?>("OriginalPreviousVersionId")
                        .HasColumnType("uuid")
                        .HasComment("Original previous version UUID from .uhc");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.Property<int>("VersionNumber")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.HasKey("Id");

                    b.HasIndex("FileHash")
                        .HasDatabaseName("IX_StagingEvidences_FileHash");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingEvidences_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalClaimId")
                        .HasDatabaseName("IX_StagingEvidences_ImportPackageId_OriginalClaimId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingEvidences_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "OriginalPersonId")
                        .HasDatabaseName("IX_StagingEvidences_ImportPackageId_OriginalPersonId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingEvidences_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingEvidences", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingHousehold", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("AdultCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("ChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("DisplacementReason")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<int>("ElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("EmployedPersonsCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("FemaleChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("FemaleCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("FemaleDisabledCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("FemaleElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("HeadOfHouseholdName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<int>("HouseholdSize")
                        .HasColumnType("integer");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<int>("InfantCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsDisplaced")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsFemaleHeaded")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<int>("MaleChildCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("MaleCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("MaleDisabledCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("MaleElderlyCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("MinorCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<decimal?>("MonthlyIncomeEstimate")
                        .HasPrecision(12, 2)
                        .HasColumnType("numeric(12,2)");

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("OriginLocation")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("OriginalHeadOfHouseholdPersonId")
                        .HasColumnType("uuid")
                        .HasComment("Original head-of-household Person UUID from .uhc");

                    b.Property<Guid>("OriginalPropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Original PropertyUnit UUID from .uhc — not a FK to production PropertyUnits");

                    b.Property<int>("OrphanCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<int>("PersonsWithDisabilitiesCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("PrimaryIncomeSource")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<int>("SingleParentCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("SpecialNeeds")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("UnemployedPersonsCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.Property<int>("WidowCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.HasKey("Id");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingHouseholds_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingHouseholds_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "OriginalPropertyUnitId")
                        .HasDatabaseName("IX_StagingHouseholds_ImportPackageId_OriginalPropertyUnitId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingHouseholds_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingHouseholds", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPerson", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("FamilyNameArabic")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FatherNameArabic")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FirstNameArabic")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FullNameEnglish")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("Gender")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("MobileNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("MotherNameArabic")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("NationalId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Primary key for duplicate detection (FR-D-5, §12.2.4)");

                    b.Property<string>("Nationality")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("OriginalHouseholdId")
                        .HasColumnType("uuid")
                        .HasComment("Original Household UUID from .uhc — not a FK to production Households");

                    b.Property<string>("PhoneNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("RelationshipToHead")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.Property<int?>("YearOfBirth")
                        .HasColumnType("integer")
                        .HasComment("Year of birth — used in duplicate detection composite with name+gender");

                    b.HasKey("Id");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingPersons_ImportPackageId");

                    b.HasIndex("NationalId")
                        .HasDatabaseName("IX_StagingPersons_NationalId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingPersons_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "OriginalHouseholdId")
                        .HasDatabaseName("IX_StagingPersons_ImportPackageId_OriginalHouseholdId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingPersons_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingPersons", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPersonPropertyRelation", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("ContractDetails")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("ContractType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("ContractTypeOtherDesc")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("EndDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("End date of the relation/contract");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Notes")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("OriginalPersonId")
                        .HasColumnType("uuid")
                        .HasComment("Original Person UUID from .uhc — not a FK to production Persons");

                    b.Property<Guid>("OriginalPropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Original PropertyUnit UUID from .uhc — not a FK to production PropertyUnits");

                    b.Property<decimal?>("OwnershipShare")
                        .HasPrecision(5, 2)
                        .HasColumnType("numeric(5,2)");

                    b.Property<string>("RelationType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("RelationTypeOtherDesc")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("StartDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Start date of the relation/contract");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.HasKey("Id");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingPersonPropertyRelations_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingPersonPropertyRelations_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "OriginalPersonId")
                        .HasDatabaseName("IX_StagingPersonPropertyRelations_ImportPackageId_OriginalPersonId");

                    b.HasIndex("ImportPackageId", "OriginalPropertyUnitId")
                        .HasDatabaseName("IX_StagingPersonPropertyRelations_ImportPackageId_OriginalPropertyUnitId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingPersonPropertyRelations_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingPersonPropertyRelations", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPropertyUnit", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<decimal?>("AreaSquareMeters")
                        .HasPrecision(10, 2)
                        .HasColumnType("numeric(10,2)");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("DamageLevel")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Description")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<decimal?>("EstimatedAreaSqm")
                        .HasPrecision(10, 2)
                        .HasColumnType("numeric(10,2)");

                    b.Property<int?>("FloorNumber")
                        .HasColumnType("integer")
                        .HasComment("Floor number (0=Ground, 1=First, -1=Basement)");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<int?>("NumberOfRooms")
                        .HasColumnType("integer")
                        .HasComment("Number of rooms (عدد الغرف)");

                    b.Property<string>("OccupancyNature")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("OccupancyStatus")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("OccupancyType")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid>("OriginalBuildingId")
                        .HasColumnType("uuid")
                        .HasComment("Original Building UUID from .uhc — not a FK to production Buildings");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("PositionOnFloor")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("SpecialFeatures")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("UnitIdentifier")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("UnitType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("UtilitiesNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.HasKey("Id");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingPropertyUnits_ImportPackageId");

                    b.HasIndex("ImportPackageId", "OriginalBuildingId")
                        .HasDatabaseName("IX_StagingPropertyUnits_ImportPackageId_OriginalBuildingId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingPropertyUnits_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingPropertyUnits_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingPropertyUnits", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingSurvey", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AppointmentReference")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid?>("CommittedEntityId")
                        .HasColumnType("uuid");

                    b.Property<string>("ContactEmail")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("ContactPhone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("GpsCoordinates")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid>("ImportPackageId")
                        .HasColumnType("uuid");

                    b.Property<string>("IntervieweeName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("IntervieweeRelationship")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsApprovedForCommit")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Notes")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("OfficeLocation")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<Guid>("OriginalBuildingId")
                        .HasColumnType("uuid")
                        .HasComment("Original Building UUID from .uhc — not a FK to production Buildings");

                    b.Property<Guid?>("OriginalClaimId")
                        .HasColumnType("uuid")
                        .HasComment("Original Claim UUID from .uhc");

                    b.Property<Guid>("OriginalEntityId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("OriginalFieldCollectorId")
                        .HasColumnType("uuid")
                        .HasComment("Optional — derived from user context during import, not from package");

                    b.Property<Guid?>("OriginalPropertyUnitId")
                        .HasColumnType("uuid")
                        .HasComment("Original PropertyUnit UUID from .uhc");

                    b.Property<string>("ReferenceCode")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-generated during commit");

                    b.Property<string>("RegistrationNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .IsConcurrencyToken()
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("bytea");

                    b.Property<string>("Source")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set during commit");

                    b.Property<DateTime>("StagedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set to Draft during commit");

                    b.Property<DateTime>("SurveyDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("SurveyTypeName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Optional — auto-set during commit");

                    b.Property<string>("Type")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Optional — auto-set (Field/Office) during commit");

                    b.Property<string>("ValidationErrors")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of blocking validation error messages");

                    b.Property<int>("ValidationStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationWarnings")
                        .HasMaxLength(8000)
                        .HasColumnType("character varying(8000)")
                        .HasComment("JSON array of non-blocking validation warning messages");

                    b.HasKey("Id");

                    b.HasIndex("ImportPackageId")
                        .HasDatabaseName("IX_StagingSurveys_ImportPackageId");

                    b.HasIndex("ReferenceCode")
                        .HasDatabaseName("IX_StagingSurveys_ReferenceCode");

                    b.HasIndex("ImportPackageId", "OriginalBuildingId")
                        .HasDatabaseName("IX_StagingSurveys_ImportPackageId_OriginalBuildingId");

                    b.HasIndex("ImportPackageId", "OriginalEntityId")
                        .IsUnique()
                        .HasDatabaseName("IX_StagingSurveys_ImportPackageId_OriginalEntityId");

                    b.HasIndex("ImportPackageId", "ValidationStatus")
                        .HasDatabaseName("IX_StagingSurveys_ImportPackageId_ValidationStatus");

                    b.ToTable("StagingSurveys", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Survey", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AppointmentReference")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid>("BuildingId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ClaimCreatedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ClaimId")
                        .HasColumnType("uuid");

                    b.Property<string>("ContactEmail")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("ContactPhone")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<int?>("DurationMinutes")
                        .HasColumnType("integer");

                    b.Property<Guid?>("ExportPackageId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ExportedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("FieldCollectorId")
                        .HasColumnType("uuid");

                    b.Property<string>("GpsCoordinates")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("ImportedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool?>("InPersonVisit")
                        .HasColumnType("boolean");

                    b.Property<string>("IntervieweeName")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("IntervieweeRelationship")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Notes")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<string>("OfficeLocation")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<Guid?>("PropertyUnitId")
                        .HasColumnType("uuid");

                    b.Property<string>("ReferenceCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("RegistrationNumber")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<int>("Source")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.Property<int>("Status")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.Property<DateTime>("SurveyDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("SurveyType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasDefaultValue("Field");

                    b.Property<int>("Type")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(1);

                    b.HasKey("Id");

                    b.HasIndex("BuildingId")
                        .HasDatabaseName("IX_Surveys_BuildingId");

                    b.HasIndex("ClaimId");

                    b.HasIndex("FieldCollectorId")
                        .HasDatabaseName("IX_Surveys_FieldCollectorId");

                    b.HasIndex("PropertyUnitId");

                    b.HasIndex("ReferenceCode")
                        .IsUnique()
                        .HasDatabaseName("IX_Surveys_ReferenceCode");

                    b.HasIndex("RegistrationNumber")
                        .HasDatabaseName("IX_Surveys_RegistrationNumber")
                        .HasFilter("[RegistrationNumber] IS NOT NULL");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_Surveys_Status");

                    b.HasIndex("SurveyDate")
                        .HasDatabaseName("IX_Surveys_SurveyDate");

                    b.HasIndex("Type")
                        .HasDatabaseName("IX_Surveys_Type");

                    b.HasIndex("Type", "Status", "FieldCollectorId")
                        .HasDatabaseName("IX_Surveys_Type_Status_Collector");

                    b.ToTable("Surveys", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.User", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AdditionalRoles")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("AssignedTabletId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Tablet device ID assigned to this field collector");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Email")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Email address (optional, unique if provided)");

                    b.Property<string>("EmployeeId")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<int>("FailedLoginAttempts")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer")
                        .HasDefaultValue(0);

                    b.Property<string>("FullNameArabic")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Full name in Arabic");

                    b.Property<string>("FullNameEnglish")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<bool>("HasDesktopAccess")
                        .HasColumnType("boolean");

                    b.Property<bool>("HasMobileAccess")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Whether the user account is active");

                    b.Property<bool>("IsAvailable")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Indicates if field collector is available for new assignments");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsLockedOut")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false)
                        .HasComment("Whether the account is locked due to failed login attempts");

                    b.Property<string>("JobTitle")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("LastFailedLoginDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastLoginDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LastPasswordChangeDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("LockoutEndDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("MustChangePassword")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Notes")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("Organization")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<DateTime?>("PasswordExpiryDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("PasswordSalt")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("character varying(255)");

                    b.Property<string>("PhoneNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("Preferences")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)");

                    b.Property<string>("PreferredLanguage")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(10)
                        .HasColumnType("character varying(10)")
                        .HasDefaultValue("ar");

                    b.Property<string>("RefreshToken")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<DateTime?>("RefreshTokenExpiryDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Role")
                        .HasColumnType("integer")
                        .HasComment("Primary user role (1=FieldCollector, 2=FieldSupervisor, 3=OfficeClerk, 4=DataManager, 5=Analyst, 6=Administrator)");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<string>("SecurityStamp")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<Guid?>("SupervisorUserId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("TabletAssignedDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("TeamName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("TwoFactorEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<string>("Username")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)")
                        .HasComment("Unique username for login");

                    b.HasKey("Id");

                    b.HasIndex("AssignedTabletId");

                    b.HasIndex("Email")
                        .IsUnique();

                    b.HasIndex("IsActive");

                    b.HasIndex("Role");

                    b.HasIndex("SupervisorUserId");

                    b.HasIndex("Username")
                        .IsUnique();

                    b.HasIndex("IsDeleted", "IsActive");

                    b.ToTable("Users", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.UserPermission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ExpiresAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When permission expires (null = never expires)");

                    b.Property<string>("GrantReason")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)")
                        .HasComment("Reason why permission was granted");

                    b.Property<DateTime>("GrantedAtUtc")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("When permission was granted (UTC)");

                    b.Property<Guid>("GrantedBy")
                        .HasColumnType("uuid")
                        .HasComment("User ID who granted this permission");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(true)
                        .HasComment("Whether this permission is currently active");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<int>("Permission")
                        .HasColumnType("integer")
                        .HasComment("Permission enum value (see Permission.cs for full list)");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid")
                        .HasComment("Foreign key to User");

                    b.HasKey("Id");

                    b.HasIndex("ExpiresAtUtc");

                    b.HasIndex("GrantedBy");

                    b.HasIndex("Permission");

                    b.HasIndex("UserId");

                    b.HasIndex("UserId", "IsActive");

                    b.HasIndex("UserId", "Permission", "IsActive")
                        .IsUnique()
                        .HasFilter("\"IsActive\" = true");

                    b.ToTable("UserPermissions", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Vocabulary", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllowCustomValues")
                        .HasColumnType("boolean")
                        .HasComment("Whether custom values can be added");

                    b.Property<string>("Category")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Category grouping (e.g., Demographics, Property, Legal)");

                    b.Property<string>("ChangeLog")
                        .HasMaxLength(2000)
                        .HasColumnType("character varying(2000)")
                        .HasComment("Changelog for this version");

                    b.Property<DateTime>("CreatedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("CreatedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("DeletedBy")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)")
                        .HasComment("Description of this vocabulary");

                    b.Property<string>("DisplayNameArabic")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Display name in Arabic");

                    b.Property<string>("DisplayNameEnglish")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)")
                        .HasComment("Display name in English");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean")
                        .HasComment("Whether this vocabulary is active");

                    b.Property<bool>("IsCurrentVersion")
                        .HasColumnType("boolean")
                        .HasComment("Whether this is the active version");

                    b.Property<bool>("IsDeleted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("boolean")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsMandatory")
                        .HasColumnType("boolean")
                        .HasComment("Whether this vocabulary is mandatory");

                    b.Property<bool>("IsSystemVocabulary")
                        .HasColumnType("boolean")
                        .HasComment("System-defined vocabulary (cannot be deleted)");

                    b.Property<DateTime?>("LastModifiedAtUtc")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("LastModifiedBy")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LastUsedDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when vocabulary was last used");

                    b.Property<int>("MajorVersion")
                        .HasColumnType("integer")
                        .HasComment("Major version number");

                    b.Property<string>("MinimumCompatibleVersion")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Minimum compatible version for imports");

                    b.Property<int>("MinorVersion")
                        .HasColumnType("integer")
                        .HasComment("Minor version number");

                    b.Property<int>("PatchVersion")
                        .HasColumnType("integer")
                        .HasComment("Patch version number");

                    b.Property<Guid?>("PreviousVersionId")
                        .HasColumnType("uuid")
                        .HasComment("Reference to previous version");

                    b.Property<byte[]>("RowVersion")
                        .HasColumnType("bytea");

                    b.Property<int>("UsageCount")
                        .HasColumnType("integer")
                        .HasComment("How many times this vocabulary has been used");

                    b.Property<int>("ValueCount")
                        .HasColumnType("integer")
                        .HasComment("Number of values in this vocabulary");

                    b.Property<string>("ValuesJson")
                        .IsRequired()
                        .HasColumnType("jsonb")
                        .HasComment("Vocabulary values as JSON array");

                    b.Property<string>("Version")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)")
                        .HasComment("Semantic version: MAJOR.MINOR.PATCH");

                    b.Property<DateTime>("VersionDate")
                        .HasColumnType("timestamp with time zone")
                        .HasComment("Date when this version was created");

                    b.Property<string>("VocabularyName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)")
                        .HasComment("Vocabulary identifier (e.g., 'gender', 'relation_type')");

                    b.HasKey("Id");

                    b.HasIndex("Category")
                        .HasDatabaseName("IX_Vocabularies_Category");

                    b.HasIndex("PreviousVersionId");

                    b.HasIndex("VocabularyName")
                        .IsUnique()
                        .HasDatabaseName("IX_Vocabularies_VocabularyName_Current")
                        .HasFilter("\"IsCurrentVersion\" = true AND \"IsDeleted\" = false");

                    b.HasIndex("VocabularyName", "IsCurrentVersion")
                        .HasDatabaseName("IX_Vocabularies_Name_IsCurrent");

                    b.ToTable("Vocabularies", (string)null);
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.AuditLog", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.AuditLog", "ParentAuditLog")
                        .WithMany()
                        .HasForeignKey("ParentAuditLogId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ParentAuditLog");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.BuildingAssignment", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Building", "Building")
                        .WithMany()
                        .HasForeignKey("BuildingId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.BuildingAssignment", "OriginalAssignment")
                        .WithMany()
                        .HasForeignKey("OriginalAssignmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Building");

                    b.Navigation("OriginalAssignment");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Claim", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Person", "PrimaryClaimant")
                        .WithMany()
                        .HasForeignKey("PrimaryClaimantId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.PropertyUnit", "PropertyUnit")
                        .WithMany("Claims")
                        .HasForeignKey("PropertyUnitId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("PrimaryClaimant");

                    b.Navigation("PropertyUnit");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.ConflictResolution", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", "ImportPackage")
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("ImportPackage");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Document", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Claim", "Claim")
                        .WithMany("Documents")
                        .HasForeignKey("ClaimId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.Evidence", "Evidence")
                        .WithMany()
                        .HasForeignKey("EvidenceId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.Document", "OriginalDocument")
                        .WithMany()
                        .HasForeignKey("OriginalDocumentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.Person", "Person")
                        .WithMany()
                        .HasForeignKey("PersonId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.PersonPropertyRelation", "PersonPropertyRelation")
                        .WithMany()
                        .HasForeignKey("PersonPropertyRelationId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.PropertyUnit", "PropertyUnit")
                        .WithMany("Documents")
                        .HasForeignKey("PropertyUnitId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Claim");

                    b.Navigation("Evidence");

                    b.Navigation("OriginalDocument");

                    b.Navigation("Person");

                    b.Navigation("PersonPropertyRelation");

                    b.Navigation("PropertyUnit");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Evidence", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Claim", "Claim")
                        .WithMany("Evidences")
                        .HasForeignKey("ClaimId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.Person", "Person")
                        .WithMany("Evidences")
                        .HasForeignKey("PersonId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.PersonPropertyRelation", "PersonPropertyRelation")
                        .WithMany("Evidences")
                        .HasForeignKey("PersonPropertyRelationId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.Evidence", "PreviousVersion")
                        .WithMany()
                        .HasForeignKey("PreviousVersionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Claim");

                    b.Navigation("Person");

                    b.Navigation("PersonPropertyRelation");

                    b.Navigation("PreviousVersion");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Household", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Person", "HeadOfHouseholdPerson")
                        .WithMany()
                        .HasForeignKey("HeadOfHouseholdPersonId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.PropertyUnit", "PropertyUnit")
                        .WithMany("Households")
                        .HasForeignKey("PropertyUnitId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("HeadOfHouseholdPerson");

                    b.Navigation("PropertyUnit");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Person", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Household", "Household")
                        .WithMany("Members")
                        .HasForeignKey("HouseholdId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Household");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PersonPropertyRelation", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Person", "Person")
                        .WithMany("PropertyRelations")
                        .HasForeignKey("PersonId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.PropertyUnit", "PropertyUnit")
                        .WithMany("PersonRelations")
                        .HasForeignKey("PropertyUnitId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.Survey", "Survey")
                        .WithMany()
                        .HasForeignKey("SurveyId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Person");

                    b.Navigation("PropertyUnit");

                    b.Navigation("Survey");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PropertyUnit", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Building", "Building")
                        .WithMany("PropertyUnits")
                        .HasForeignKey("BuildingId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Building");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Referral", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Claim", "Claim")
                        .WithMany("Referrals")
                        .HasForeignKey("ClaimId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.Referral", "PreviousReferral")
                        .WithMany()
                        .HasForeignKey("PreviousReferralId");

                    b.Navigation("Claim");

                    b.Navigation("PreviousReferral");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingBuilding", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingClaim", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingEvidence", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingHousehold", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPerson", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPersonPropertyRelation", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingPropertyUnit", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Staging.StagingSurvey", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.ImportPackage", null)
                        .WithMany()
                        .HasForeignKey("ImportPackageId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Survey", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Building", "Building")
                        .WithMany()
                        .HasForeignKey("BuildingId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.Claim", "Claim")
                        .WithMany()
                        .HasForeignKey("ClaimId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("TRRCMS.Domain.Entities.User", "Collector")
                        .WithMany()
                        .HasForeignKey("FieldCollectorId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("TRRCMS.Domain.Entities.PropertyUnit", "PropertyUnit")
                        .WithMany()
                        .HasForeignKey("PropertyUnitId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Building");

                    b.Navigation("Claim");

                    b.Navigation("Collector");

                    b.Navigation("PropertyUnit");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.User", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.User", "Supervisor")
                        .WithMany("Supervisees")
                        .HasForeignKey("SupervisorUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Supervisor");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.UserPermission", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.User", "User")
                        .WithMany("Permissions")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Vocabulary", b =>
                {
                    b.HasOne("TRRCMS.Domain.Entities.Vocabulary", "PreviousVersion")
                        .WithMany()
                        .HasForeignKey("PreviousVersionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("PreviousVersion");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Building", b =>
                {
                    b.Navigation("PropertyUnits");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Claim", b =>
                {
                    b.Navigation("Documents");

                    b.Navigation("Evidences");

                    b.Navigation("Referrals");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Household", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.Person", b =>
                {
                    b.Navigation("Evidences");

                    b.Navigation("PropertyRelations");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PersonPropertyRelation", b =>
                {
                    b.Navigation("Evidences");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.PropertyUnit", b =>
                {
                    b.Navigation("Claims");

                    b.Navigation("Documents");

                    b.Navigation("Households");

                    b.Navigation("PersonRelations");
                });

            modelBuilder.Entity("TRRCMS.Domain.Entities.User", b =>
                {
                    b.Navigation("Permissions");

                    b.Navigation("Supervisees");
                });
#pragma warning restore 612, 618
        }
    }
}
